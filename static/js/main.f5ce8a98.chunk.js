(this["webpackJsonpproject-ecommerce"]=this["webpackJsonpproject-ecommerce"]||[]).push([[0],{46:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var a=c(3),r=c(29),n=c.n(r),o=(c(18),c(8)),s=c(24),i=(c(37),s.a.initializeApp({apiKey:"AIzaSyCjCzSeB01484E8QgN4YBkLv3GiiB5Qkzs",authDomain:"project-ecommerce-3002e.firebaseapp.com",projectId:"project-ecommerce-3002e",storageBucket:"project-ecommerce-3002e.appspot.com",messagingSenderId:"735316628771",appId:"1:735316628771:web:dcf3746b707b4f397d2896"})),l=s.a.firestore(i),j=c(32),d=c(2),b=Object(a.createContext)(),m=function(e){var t=e.children,c=Object(a.useState)([]),r=Object(o.a)(c,2),n=r[0],s=r[1],i=Object(a.useState)(0),m=Object(o.a)(i,2),u=m[0],O=m[1],h=Object(a.useState)(0),x=Object(o.a)(h,2),p=x[0],f=x[1],N=Object(a.useState)(""),v=Object(o.a)(N,2),g=v[0],C=v[1];function I(){var e=0;n.forEach((function(t){e+=t.price*t.cantidadProd})),O(e)}var z={carrito:n,addItem:function(e,t){var c,a=n,r={id:e.id,title:e.title,img:e.thumbnail,price:e.price,cantidadProd:t},o=(c=r.id,void 0==n.find((function(e){return e.id===c}))?0:1);if(0===o)a.push(r);else if(1===o){a.find((function(e){return e.id===r.id})).cantidadProd+=r.cantidadProd}s(a),f(p+r.cantidadProd)},removeItem:function(e,t){var c=n;c.splice(e,1),s(c),I(),f(p-t)},clear:function(){s([]),O(0),f(0)},totalCompra:I,total:u,totalItems:p,resetConfirmarMensaje:function(){C("")},ordenCompra:function(e){var t={comprador:{nombre:e.nombre,apellido:e.apellido,correo:e.correo,telefono:e.telefono},productos:n,date:j.a.firestore.Timestamp.now(),total:u};l.collection("ordenes").add(t).then((function(e){C("Tu n\xfamero de orden es: ".concat(e.id))})).catch((function(e){C("Ha ocurrido un error al procesar tu pedido, por favor int\xe9ntalo m\xe1s tarde.")}))},confirmarMensaje:g};return Object(d.jsx)(b.Provider,{value:z,children:t})},u=function(){var e=Object(a.useContext)(b),t=e.carrito,c=e.totalItems;return t.length>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("box-icon",{name:"cart",flip:"horizontal",color:"#ffffff"}),Object(d.jsx)("span",{className:"numeroItems",children:c})]}):Object(d.jsx)(d.Fragment,{})},O=c(10),h=function(){return Object(d.jsxs)("nav",{className:"navBar",children:[Object(d.jsxs)("div",{className:"brand",children:[Object(d.jsx)("box-icon",{name:"beer",type:"solid",flip:"horizontal",color:"#d0a70a"}),Object(d.jsx)(O.b,{className:"menuItem",to:"/",children:"De Revuelta"})]}),Object(d.jsx)(O.b,{className:"menuItem",to:"/",children:"Productos"}),Object(d.jsx)(O.b,{className:"menuItem",to:"/categoria/1",children:"Cervezas"}),Object(d.jsx)(O.b,{className:"menuItem",to:"/categoria/2",children:"Accesorios"}),Object(d.jsx)(O.b,{to:"/cart/",children:Object(d.jsx)(u,{})})]})},x=function(){return Object(d.jsxs)("header",{children:[Object(d.jsx)(h,{}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"logoHeader",children:Object(d.jsx)("h1",{className:"tituloHeader",children:"Cervezas De ReVuelta"})})]})},p=c(21),f=function(e){var t=e.stock,c=e.initial,r=e.onAdd,n=Object(a.useState)(c),s=Object(o.a)(n,2),i=s[0],l=s[1],j=Object(a.useState)(!1),b=Object(o.a)(j,2),m=b[0],u=b[1],O=function(){u(!0),setTimeout((function(){u(!1)}),800)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("article",{className:"itemCount",children:[Object(d.jsxs)("div",{className:"contador",children:[Object(d.jsx)("button",{className:"btnMasMenos",onClick:function(){i>c&&l(i-1)},children:Object(d.jsx)("box-icon",{name:"minus"})}),Object(d.jsx)("span",{children:i}),Object(d.jsx)("button",{className:"btnMasMenos",onClick:function(){i<t&&l(i+1)},children:Object(d.jsx)("box-icon",{name:"plus"})})]}),Object(d.jsx)("button",{className:"btn-agregarCarrito",onClick:function(){r(i),O()},children:"Agregar"})]}),m?Object(d.jsx)("div",{className:"alerta",children:"Se agreg\xf3 al carrito"}):null]})},N=function(e){var t=e.detalle,c=Object(a.useContext)(b).addItem;return Object(d.jsxs)("div",{className:"tarjeta",children:[Object(d.jsxs)(O.b,{to:"/item/".concat(t.id),className:"enlaceTarjeta",children:[Object(d.jsx)("img",{src:t.thumbnail,alt:"",width:"100%",height:"200px"}),Object(d.jsx)("h3",{className:"tarjetaTitulo",children:t.title}),Object(d.jsx)("p",{className:"tarjetaDescripcion",children:t.description}),Object(d.jsxs)("p",{className:"tarjetaPrecio",children:["$",t.price]})]}),Object(d.jsx)(f,{stock:t.stock,initial:1,onAdd:function(e){c(t,e)}})]})},v=function(e){var t=e.catalogo;return Object(d.jsx)("div",{className:"itemList",children:null!==t&&t.map((function(e,t){return Object(d.jsx)(N,{detalle:e},t)}))})},g=c(7),C=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)("Cargando..."),s=Object(o.a)(n,2),i=s[0],j=s[1],b=Object(g.f)().id;return Object(a.useEffect)((function(){var e=l.collection("productos"),t=[],c=function(e){e.docs.forEach((function(e){var c=e.id,a=e.data(),r=Object(p.a)({id:c},a);t.push(r)}))};if(b){var a=e.where("category","==",b).get();a.then((function(e){c(e),r(t),j(" ")})),a.catch((function(e){console.log(e)}))}else{var n=e.get();n.then((function(e){c(e),r(t),j(" ")})),n.catch((function(e){console.log(e)}))}}),[b]),Object(d.jsxs)("section",{id:"productos",children:[Object(d.jsx)("h1",{className:"mainTitulo",children:"Hola, este es el cat\xe1logo!"}),Object(d.jsx)("h3",{className:"estadoCarga",children:i}),Object(d.jsx)(v,{catalogo:c})]})},I=function(e){var t=e.detalle,c=Object(a.useContext)(b).addItem,r=Object(a.useState)(),n=Object(o.a)(r,2),s=n[0],i=n[1];return Object(d.jsxs)("article",{className:"tarjetaDetalle",children:[Object(d.jsx)("img",{className:"tarjetaDetalleImg",src:t.thumbnail,alt:"",width:"100%",height:"350px"}),Object(d.jsxs)("div",{className:"tarjetaDetalleDatos",children:[Object(d.jsx)("h3",{className:"tarjetaTitulo",children:t.title}),Object(d.jsxs)("h4",{className:"tarjetaPrecio",children:["$",t.price]}),Object(d.jsx)("p",{className:"tarjetaDescripcion",children:t.description}),Object(d.jsxs)("span",{className:"tarjetaStock",children:["Quedan ",t.stock," productos"]}),Object(d.jsx)(f,{stock:t.stock,initial:1,onAdd:function(e){c(t,e),i(e)}}),Object(d.jsx)("button",{className:"btn-comprar",hidden:!(s>=1),children:Object(d.jsx)(O.b,{to:"/cart/",className:"btn-comprarTexto",children:"Comprar"})})]})]})},z=function(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)("Cargando..."),s=Object(o.a)(n,2),i=s[0],j=s[1],b=Object(g.f)().id;return Object(a.useEffect)((function(){var e=l.collection("productos").doc(b).get();e.then((function(e){r(Object(p.a)({id:e.id},e.data())),j(" ")})),e.catch((function(e){}))}),[]),Object(d.jsxs)("section",{className:"contenedorDetalles",children:[Object(d.jsx)("h3",{children:i}),Object(d.jsx)(I,{detalle:c})]})},S=function(){var e=Object(a.useContext)(b),t=e.removeItem,c=e.carrito;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("ul",{className:"tarjetaCarritoEncabezado",children:[Object(d.jsx)("li",{className:"tarjetaCarritoTitulo",children:"Eliminar"}),Object(d.jsx)("li",{className:"tarjetaCarritoTitulo",children:"Im\xe1gen"}),Object(d.jsx)("li",{className:"tarjetaCarritoTitulo",children:"Producto"}),Object(d.jsx)("li",{className:"tarjetaCarritoTitulo",children:"Precio"}),Object(d.jsx)("li",{className:"tarjetaCarritoTitulo",children:"Cantidad"}),Object(d.jsx)("li",{className:"tarjetaCarritoTitulo",children:"Subtotal"})]}),c.map((function(e,c){return Object(d.jsxs)("div",{className:"tarjetaCarrito",children:[Object(d.jsx)("button",{className:"btn-removeItem",onClick:function(){t(c,e.cantidadProd)},children:Object(d.jsx)("box-icon",{name:"x",size:"5vh"})}),Object(d.jsx)("img",{className:"tarjetaCarritoImg",src:e.img,alt:"",width:"200px",height:"auto"}),Object(d.jsx)("h3",{className:"tarjetaCarritoTitulo",children:e.title}),Object(d.jsxs)("p",{className:"tarjetaCarritoPrecio",children:["$",e.price]}),Object(d.jsxs)("p",{className:"tarjetaCarritoCantidad",children:[e.cantidadProd," ud."]}),Object(d.jsxs)("p",{className:"tarjetaCarritoPrecio",children:["$",e.price*e.cantidadProd]})]},c)}))]})},T=function(e){var t=e.ordenCompra,c=Object(a.useContext)(b),r=c.confirmarMensaje,n=c.clear,s=Object(a.useState)(""),i=Object(o.a)(s,2),l=i[0],j=i[1],m=Object(a.useState)(""),u=Object(o.a)(m,2),h=u[0],x=u[1],p=Object(a.useState)(""),f=Object(o.a)(p,2),N=f[0],v=f[1],g=Object(a.useState)(""),C=Object(o.a)(g,2),I=C[0],z=C[1],S=Object(a.useState)(""),T=Object(o.a)(S,2),k=T[0],F=T[1],E=Object(a.useState)(""),P=Object(o.a)(E,2),y=P[0],D=P[1];function L(e){return/^(([^<>()[\]\\.,:\s@"]+(\.[^<>()[\]\\.,:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}return Object(d.jsxs)("section",{className:"infoContacto",children:[Object(d.jsx)("h2",{className:"mainTitulo",children:"Informaci\xf3n de contacto"}),Object(d.jsxs)("div",{className:"form",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"name",className:"inputLabelForm",children:"Nombre"}),Object(d.jsx)("input",{type:"text",name:"name",id:"name",onChange:function(e){return j(e.target.value)},required:!0,maxLength:"50",placeholder:"Ingresa tu nombre",className:"inputForm"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"lastName",className:"inputLabelForm",children:"Apellido"}),Object(d.jsx)("input",{type:"text",name:"lastName",id:"lastName",onChange:function(e){return x(e.target.value)},required:!0,maxLength:"50",placeholder:"Ingresa tu apellido",className:"inputForm"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"phone",className:"inputLabelForm",children:"Tel\xe9fono"}),Object(d.jsx)("input",{type:"text",name:"phone",id:"phone",onChange:function(e){return z(e.target.value)},required:!0,maxLength:"15",placeholder:"Ingresa tu tel\xe9fono",className:"inputForm"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"email",className:"inputLabelForm",children:"Correo electr\xf3nico"}),Object(d.jsx)("input",{type:"text",name:"email",id:"email",onChange:function(e){return v(e.target.value)},required:!0,maxLength:"50",placeholder:"Ingresa tu correo",className:"inputForm"})]})]}),Object(d.jsx)("p",{className:"mensajeErrorForm",children:y}),Object(d.jsx)("p",{className:"mensajeErrorForm",children:k}),""===r?Object(d.jsx)("button",{onClick:function(){F(""===l||""===h||""===N||""===I?"* Todos los campos son obligatorios":""),L(N)?D(""):D("* El correo ingresado no es valido"),""!==l&&""!==h&&""!==I&&L(N)&&t({nombre:l,apellido:h,telefono:I,correo:N})},className:"btn-finalizar btn-finalizarTexto",children:"Enviar formulario"}):Object(d.jsx)("button",{className:"btn-finalizar btn-finalizarTexto",children:Object(d.jsx)(O.b,{to:"/cart/compraExitosa",onClick:n,className:"btn-finalizarTexto btn-finalizarTextoSize",children:"Enviar orden de compra"})})]})},k=function(){var e=Object(a.useContext)(b),t=e.carrito,c=e.clear,r=e.totalCompra,n=e.total,s=e.ordenCompra,i=Object(a.useState)(!1),l=Object(o.a)(i,2),j=l[0],m=l[1];return Object(a.useEffect)((function(){r()})),Object(d.jsxs)("section",{className:"cart",children:[Object(d.jsx)(O.b,{to:"/",children:Object(d.jsx)("box-icon",{name:"home",type:"solid",color:"#975600",size:"7vh"})}),Object(d.jsx)("h1",{className:"mainTitulo",children:"Hola! Este es el carrito de compras"}),t.length>0?Object(d.jsxs)("article",{className:"cartList",children:[Object(d.jsx)(S,{}),Object(d.jsx)("button",{className:"btn-vaciarCarrito",onClick:c,children:Object(d.jsx)("box-icon",{name:"trash",type:"solid",color:"#975600",size:"5.5vh"})}),Object(d.jsxs)("h3",{children:["Total del carrito: ",n]}),Object(d.jsx)("button",{className:"btn-finalizar btn-finalizarTexto",onClick:function(){m(!0)},children:"Ir a pagar"}),j?Object(d.jsx)(T,{ordenCompra:s}):null]}):Object(d.jsx)("h3",{className:"estadoCarga",children:"El carrito est\xe1 vac\xedo"})]})},F=function(){return Object(d.jsxs)("footer",{children:[Object(d.jsxs)("div",{className:"brand brandFooter",children:[Object(d.jsx)("box-icon",{name:"beer",type:"solid",flip:"horizontal",color:"#d0a70a"}),Object(d.jsx)(O.b,{className:"menuItem",to:"/",children:"De Revuelta"})]}),Object(d.jsx)("p",{className:"textoFooter",children:"Projecto Ecommerce 2021 CoderHouse"})]})},E=function(){var e=Object(a.useContext)(b),t=e.clear,c=e.confirmarMensaje,r=e.resetConfirmarMensaje;function n(){t(),r()}return Object(d.jsxs)("section",{children:[Object(d.jsx)(O.b,{to:"/",onClick:n,children:Object(d.jsx)("box-icon",{name:"home",type:"solid",color:"#975600",size:"7vh"})}),Object(d.jsx)("h3",{children:"Hola, tu compra ha sido realizada con \xe9xito!"}),Object(d.jsx)("h4",{children:c}),Object(d.jsxs)(O.b,{to:"/",onClick:n,children:[Object(d.jsx)("box-icon",{name:"left-arrow-alt"}),"Volver al inicio"]})]})},P=function(){return Object(d.jsx)(m,{children:Object(d.jsxs)(O.a,{children:[Object(d.jsx)(x,{}),Object(d.jsx)("main",{children:Object(d.jsxs)(g.c,{children:[Object(d.jsx)(g.a,{path:"/",component:C,exact:!0}),Object(d.jsx)(g.a,{path:"/categoria/:id",component:C}),Object(d.jsx)(g.a,{path:"/item/:id",component:z}),Object(d.jsx)(g.a,{path:"/cart/compraExitosa",component:E}),Object(d.jsx)(g.a,{path:"/cart/",component:k})]})}),Object(d.jsx)(F,{})]})})};c(46);n.a.render(Object(d.jsx)(P,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.f5ce8a98.chunk.js.map